Fix edge case
Update API endpoint
Add tests
